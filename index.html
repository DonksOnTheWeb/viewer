<!DOCTYPE html>
<html>
<head>
    <title>KML Viewer</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/openlayers/openlayers.github.io@master/en/v6.9.0/css/ol.css" type="text/css">
    <style>
        .map {
            height: 900px;
            width: 100%;
        }

        /* Add style for tooltip div */
        .tooltip {
            position: absolute;
            background-color: #f9f9f9;
            border: 1px solid #c0c0c0;
            border-radius: 5px;
            padding: 10px;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.1s;
        }
    </style>
    <script src="https://cdn.jsdelivr.net/npm/ol/dist/ol.js"></script>
</head>
<body>
    <h2>David's 1337 Map.</h2>
    <div id="map" class="map"></div>
    <textarea id="kml_input" placeholder="Paste your KML string here"></textarea>
    <button onclick="loadKML()">Load KML</button>
    <div id="tooltip" class="tooltip"></div> <!-- Add tooltip div -->

    <script type="text/javascript">
        var map = new ol.Map({
            layers: [
                new ol.layer.Tile({
                    source: new ol.source.OSM()
                })
            ],
            target: 'map',
            view: new ol.View({
                center: [0, 0],
                zoom: 2
            })
        });

        // Create tooltip element
        var tooltip = document.getElementById('tooltip');

        async function loadKML() { // Add async keyword here
		
            var fileID = "14BnOoG7Z_Md5KhWslE0C3ZMWSxCkHGRp"; // Replace with your file ID.
            var url = "https://script.google.com/a/macros/gopuff.com/s/AKfycby6EyTiJC6aR17u4-zjt5Oqw2rI4RHQgNtCxDlvge7GNlXdq4vIeDPus7hVIJyGqokF/exec?id=" + fileID; // Replace with your web app URL.

            // Fetch KML data from Google Drive via Google Apps Script
            var response = await fetch(url);
			
            if (!response.ok) {
                alert("HTTP error " + response.status);
                return;
            }
			
            var kmlString = await response.text();

            // rest of the function...
        }
    </script>
</body>
</html>
